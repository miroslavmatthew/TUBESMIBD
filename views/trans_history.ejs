<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="asset/trans_history.js" defer></script>
    <script src="https://kit.fontawesome.com/d53ca09937.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="asset/trans_history.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Karantina&family=Poppins&family=Roboto&display=swap" rel="stylesheet">
    <title>Document</title>
  </head>
  <body>
    <div class="header">
      <img
        src="asset/Group 3.png"
        style="width: 200px"
        onclick="window.location.href='/';"
        id="logoJudul"
      />
      <div class="judul">TRANSACTION HISTORY PAGE</div>
      <i class="fa-regular fa-user fa-xl"></i>
    </div>

    <div id="home">
      <div class="greet">
        <div>Hello, here is your transaction history</div>
      </div>
      <div id="pagi">
        <% for(let i =0 ;i<results.length/4;i++) { %> 
          <a class="pagination" href="/history?page=<%= i %>"><%= i+1 %></a>
          <% } %>
      </div>
     
      <table id="ticketList"> 
        <tr>
          <th>Tanggal</th>
          <th>Nomor Meja</th>
          <th>Jam</th>
          <th>Status</th>
        </tr>
        <%for(let i = 0; i < historys.length; i++){%>
        <tr class="datas">
          <td><%= historys[i].Tanggal.toLocaleDateString("en-US") %></td>
          <td><%= historys[i].noMeja %></td>
          <td><%= historys[i].Jam %></td>
          <%if(historys[i].Status == 'Redeemed'){%>
          <td><button class="statusBtn" value="Status"><%= historys[i].Status %></button></td>
          <%} else{%>
          <td><button onclick="openForm()" class="statusBtnBooked" value="<%=JSON.stringify(historys[i])%>"><%= historys[i].Status %></button></td>
          <%}%>
        </tr>
        <% }%>
       
      </table>
      <footer>
        <img src="asset/image 5.png" alt="">
      </footer>
    </div>

    <div id="popupForm" class="popup-form">
      <div class="popup-content">
        <div class="ticket">
          <span class="close-btn" onclick="closeForm()">&times;</span>
          <div class="atas">
              <h2>Ticket</h2>
              <img src="asset/Group 3.png" style="width: 150px"/>
          </div>
          <div class="garis"></div>
          <div class="bawah">
              <div class="a">
                  <div class="table">
                      <p>Table</p>
                      <p class="bold" id="formTable"></p>
                  </div>
                  <div class="info">
                      <div class="date">
                          <p>Date</p>
                          <p class="bold" id="formDate"></p>
                      </div>
                      <div class="start">
                          <p>Start</p>
                          <p class="bold" id="formStart"></p>
                      </div>
                      <div class="end">
                          <p>End</p>
                          <p class="bold" id="formEnd"></p>
                      </div>
                  </div>
              </div>
              <div class="garis2">
                <div class="b">
                    <p>Status</p>
                    <p class="bold" id="formStat"></p>
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
